{"remainingRequest":"E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\src\\views\\goods\\recommend.vue?vue&type=style&index=0&id=0d14f099&scoped=true&lang=css&","dependencies":[{"path":"E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\src\\views\\goods\\recommend.vue","mtime":1695831695099},{"path":"E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5hdmF0YXIgewogIHdpZHRoOiAxNDVweDsKICBoZWlnaHQ6IDE0NXB4OwogIGRpc3BsYXk6IGJsb2NrOwp9Cg=="},{"version":3,"sources":["recommend.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0PA;AACA;AACA;AACA;AACA","file":"recommend.vue","sourceRoot":"src/views/goods","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-row style=\"margin-bottom: 12px\">\n      <el-col :span=\"5\">\n        <el-button icon=\"el-icon-download\" size=\"mini\" type=\"warning\" @click=\"handleExport()\">导出</el-button>\n        <el-button icon=\"el-icon-delete\" size=\"mini\" type=\"danger\" @click=\"handleDeletes()\">删除</el-button>\n<!--        <el-button icon=\"el-icon-delete\" size=\"mini\" type=\"danger\" @click=\"getRecommend()\">添加</el-button>-->\n      </el-col>\n      <el-col :span=\"19\">\n        <el-form ref=\"queryForm\" :model=\"queryParams\" size=\"small\" style=\"float: right\" :inline=\"true\">\n          <el-form-item label=\"标题\" prop=\"deptName\">\n            <el-input\n              v-model=\"queryParams.title\"\n              placeholder=\"请输入标题\"\n              clearable\n              @keyup.enter.native=\"handleQuery\"\n            />\n          </el-form-item>\n          <el-form-item label=\"描述\" prop=\"status\">\n            <el-input\n              v-model=\"queryParams.description\"\n              placeholder=\"请输入轮播图描述\"\n              clearable\n              @keyup.enter.native=\"handleQuery\"\n            />\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\n            <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\n          </el-form-item>\n        </el-form>\n      </el-col>\n    </el-row>\n    <el-table v-loading=\"listLoading\" :row-style=\"{height:'45px'}\" :cell-style=\"{padding:'0px'}\" :data=\"list\" element-loading-text=\"Loading\"  fit highlight-current-row @selection-change=\"handleSelectionChange\">\n      <el-table-column\n        type=\"selection\"\n        width=\"55\"\n      />\n      <el-table-column align=\"center\" label=\"编号\" prop=\"id\" width=\"100\" />\n      <el-table-column align=\"center\" label=\"物品编号\" prop=\"goodsId\" width=\"100\" />\n      <el-table-column align=\"center\" label=\"物品名称\" prop=\"goodsName\" />\n      <el-table-column align=\"center\" label=\"价格\" prop=\"goodsPrice\" width=\"100\"/>\n      <el-table-column label=\"图片\" align=\"center\" width=\"100\">\n        <template v-slot=\"scope\">\n          <el-image :src=\"scope.row.goodsImage\" style=\"width:64px;height:64px;\" :preview-src-list=\"[scope.row.goodsImage]\" />\n        </template>\n      </el-table-column>\n      <el-table-column align=\"center\" label=\"描述\" prop=\"goodsPrice\" />\n      <el-table-column align=\"center\" prop=\"created_at\" label=\"操作\" width=\"250\">\n        <template v-slot=\"scope\">\n          <el-button type=\"primary\" icon=\"el-icon-refresh\" size=\"mini\" @click=\"handleCorret(scope.row.id)\">同步</el-button>\n          <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click=\"handleDelete(scope.row)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <pagination v-show=\"total>0\" :total=\"total\" :page.sync=\"queryParams.pageNo\" :limit.sync=\"queryParams.pageSize\" @pagination=\"getList\" />\n    <el-dialog width=\"600px\" :title=\"goodsFormTitle\" :visible.sync=\"goodsFormShow\">\n      <el-table v-loading=\"listLoading\" :row-style=\"{height:'45px'}\" :cell-style=\"{padding:'0px'}\" :data=\"recommeds\" element-loading-text=\"Loading\"  fit highlight-current-row @selection-change=\"handleSelectionChange\">\n<!--        <el-table-column-->\n<!--          type=\"selection\"-->\n<!--          width=\"55\"-->\n<!--        />-->\n      <el-table-column align=\"center\" label=\"物品名称\" prop=\"name\" width=\"100\" />\n      <el-table-column align=\"center\" label=\"价格\" prop=\"price\" width=\"100\" />\n      <el-table-column align=\"center\" label=\"浏览量\" prop=\"viewCount\" />\n        <el-table-column\n          label=\"操作\">\n          <el-button icon=\"el-icon-delete\" size=\"mini\" type=\"danger\" @click=\"getRecommend()\">添加</el-button>\n        </el-table-column>\n      </el-table>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { list, corret, deletes, getRecommed, setRecommed } from '@/api/goods/recommend'\nimport pagination from '@/components/Pagination'\nimport { exportFile } from '@/utils/request'\nimport { policy } from '@/api/oss/policy'\nimport { getUUID } from '@/utils'\n\nexport default {\n  components: { pagination },\n  filters: {\n    statusFilter(status) {\n      const statusMap = {\n        published: 'success',\n        draft: 'gray',\n        deleted: 'danger'\n      }\n      return statusMap[status]\n    }\n  },\n  data() {\n    return {\n      recommend: {},\n      goodsForm: {},\n      goodsFormShow: false,\n      goodsFormTitle: '添加推荐',\n      dataObj: {},\n      bannerForm: {\n        imageUrl: '',\n        isActive: 0\n      },\n      checkedIds: [],\n      total: 0,\n      queryParams: {\n        pageNo: 1,\n        pageSize: 10\n      },\n      list: null,\n      listLoading: true,\n      recommeds: null\n    }\n  },\n  created() {\n    this.getList()\n  },\n  methods: {\n    getRecommend(){\n      this.goodsFormShow = true\n      getRecommed().then(res =>{\n        // console.log(res)\n        console.log('...', res)\n        this.recommeds = res.data\n      })\n    },\n    setRecommend(){\n      this.goodsFormShow = false\n      setRecommed().then(res-{\n\n      })\n    },\n    handleSelectionChange(values) {\n      this.checkedIds = []\n      values.map(res => this.checkedIds.push(res.id))\n    },\n    /** 导出excel文件 */\n    handleExport() {\n      exportFile('/cloud-goods/recommend/export', '推荐商品列表')\n    },\n    /** 搜索按钮操作 */\n    handleQuery() {\n      this.getList()\n    },\n    /** 重置按钮操作 */\n    resetQuery() {\n      this.queryParams = {\n        pageNo: 1,\n        pageSize: 10\n      }\n      this.handleQuery()\n    },\n    handleCorret(id) {\n      corret(id).then(res => {\n        this.$message({\n          type: 'success',\n          message: '数据同步成功!'\n        })\n        this.getList()\n      })\n    },\n    handleDeletes() {\n      if (this.checkedIds.length === 0) {\n        this.$message({\n          type: 'warning',\n          message: '请勾选需要删除的记录!'\n        })\n        return\n      }\n      this.$confirm(`确定执行删除操作吗？`, '是否继续?', '提示', {\n        confirmButtonText: '删除',\n        cancelButtonText: '算了吧',\n        type: 'warning'\n      }).then(() => {\n        deletes(this.checkedIds).then(res => {\n          this.$message({\n            type: 'success',\n            message: '操作成功!'\n          })\n          this.getList()\n        })\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '取消操作'\n        })\n      })\n    },\n    getList() {\n      this.listLoading = true\n      list(this.queryParams).then(response => {\n        this.list = response.data.list\n        this.total = response.data.total\n        this.listLoading = false\n      })\n    },\n    handleEdit(id) {\n      info(id).then(res => {\n        this.bannerForm = res.data\n        this.bannerFormShow = true\n      })\n    },\n    handleDelete(row) {\n      this.$confirm(`确定删除吗？`, '是否继续?', '提示', {\n        confirmButtonText: '删除',\n        cancelButtonText: '算了吧',\n        type: 'warning'\n      }).then(() => {\n        deletes([row.id]).then(res => {\n          this.$message({\n            type: 'success',\n            message: '操作成功!'\n          })\n          this.getList()\n        })\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '取消操作'\n        })\n      })\n    },\n    beforeUpload(file) {\n      const _self = this\n      return new Promise((resolve, reject) => {\n        policy()\n          .then(response => {\n            _self.dataObj.policy = response.data.policy\n            _self.dataObj.signature = response.data.signature\n            _self.dataObj.ossaccessKeyId = response.data.accessid\n            _self.dataObj.key = response.data.dir + getUUID() + file.name\n            _self.dataObj.dir = response.data.dir\n            _self.dataObj.host = response.data.host\n            resolve(true)\n          })\n          .catch(err => {\n            console.log('出错了...', err)\n            reject(false)\n          })\n      })\n    },\n    handleImgUploadSuccess(res, file) {\n      this.bannerForm.imageUrl = this.dataObj.host + '/' + this.dataObj.key\n      this.$forceUpdate()\n    }\n  }\n}\n</script>\n<style scoped>\n.avatar {\n  width: 145px;\n  height: 145px;\n  display: block;\n}\n</style>\n"]}]}