{"remainingRequest":"E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\src\\views\\admin\\role\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\src\\views\\admin\\role\\index.vue","mtime":1694356754351},{"path":"E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBjcmVhdGVSb2xlLCBkZWxldGVzLCBsaXN0UGFnZSwgdXBkYXRlUm9sZSwgdXBkYXRlU3RhdHVzIH0gZnJvbSAnQC9hcGkvYWRtaW4vcm9sZScNCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4Jw0KaW1wb3J0IHsgbWVudVNlbGVjdCwgcm9sZU1lbnVzLCBzYXZlUm9sZU1lbnVzIH0gZnJvbSAnQC9hcGkvYWRtaW4vbWVudScNCmltcG9ydCB7IHBlcm1pc3Npb25MaXN0LCByb2xlUGVybWlzc2lvbnMsIHNhdmVSb2xlUGVybWlzc2lvbnMgfSBmcm9tICdAL2FwaS9hZG1pbi9wZXJtaXNzaW9uJw0KaW1wb3J0IFBhZ2luYXRpb24gZnJvbSAnQC9jb21wb25lbnRzL1BhZ2luYXRpb24nDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ0Rhc2hib2FyZCcsDQogIGNvbXBvbmVudHM6IHsgUGFnaW5hdGlvbiB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICByb2xlSWQ6ICcnLA0KICAgICAgbGlzdExvYWRpbmc6IGZhbHNlLA0KICAgICAgcm9sZVBlcm1pc3Npb25zOiBbXSwNCiAgICAgIHBlcm1pc3Npb25zOiBbXSwNCiAgICAgIHJvbGVGb3JtVGl0bGU6ICcnLA0KICAgICAgbWVudXM6IFtdLA0KICAgICAgcm9sZUZvcm1TaG93OiBmYWxzZSwNCiAgICAgIHJvbGVGb3JtOiB7DQogICAgICAgIGlkOiAnJywNCiAgICAgICAgbmFtZTogJycsDQogICAgICAgIGNvZGU6ICcnLA0KICAgICAgICBzb3J0OiAnJywNCiAgICAgICAgc3RhdHVzOiAxDQogICAgICB9LA0KICAgICAgcm9sZUxpc3Q6IFtdLA0KICAgICAgcnVsZUxpc3RMb2FkaW5nOiB0cnVlLA0KICAgICAgdG90YWw6IDAsDQogICAgICBwYWdlUGFyYW06IHsNCiAgICAgICAgcGFnZU5vOiAxLA0KICAgICAgICBwYWdlU2l6ZTogMTAsDQogICAgICAgIGtleXdvcmQ6ICcnDQogICAgICB9DQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuZmV0Y2hSb2xlRGF0YSgpDQogICAgdGhpcy5sb2FkTWVudVNlbGVjdCgpDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBzYXZlUm9sZVBlcm1pc3Npb24oKSB7DQogICAgICBpZiAoIXRoaXMucm9sZUlkKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgIHR5cGU6ICdlcnJvcicsDQogICAgICAgICAgbWVzc2FnZTogJ+ivt+WFiOmAieaLqeinkuiJsiEnDQogICAgICAgIH0pDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgc2F2ZVJvbGVQZXJtaXNzaW9ucyh0aGlzLnJvbGVJZCwge2lkczogdGhpcy5yb2xlUGVybWlzc2lvbnN9KS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywNCiAgICAgICAgICBtZXNzYWdlOiAn5pu05paw5oiQ5YqfIScNCiAgICAgICAgfSkNCiAgICAgIH0pDQogICAgfSwNCiAgICBzYXZlUm9sZU1lbnUoKSB7DQogICAgICBpZiAoIXRoaXMucm9sZUlkKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgIHR5cGU6ICdlcnJvcicsDQogICAgICAgICAgbWVzc2FnZTogJ+ivt+WFiOmAieaLqeinkuiJsiEnDQogICAgICAgIH0pDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgdmFyIGFyciA9IFtdOw0KICAgICAgdGhpcy4kcmVmcy50cmVlLmdldENoZWNrZWROb2RlcyhmYWxzZSwgdHJ1ZSkuZm9yRWFjaChpdGVtPT57DQogICAgICAgIGFyci5wdXNoKGl0ZW0uaWQpDQogICAgICB9KQ0KICAgICAgc2F2ZVJvbGVNZW51cyh0aGlzLnJvbGVJZCwgeyBpZHM6IGFyciB9KS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywNCiAgICAgICAgICBtZXNzYWdlOiAn5pu05paw5oiQ5YqfIScNCiAgICAgICAgfSkNCiAgICAgIH0pDQogICAgfSwNCiAgICBub2RlQ2xpY2sobWVudSwgbm9kZUluZm8pIHsNCiAgICAgIHBlcm1pc3Npb25MaXN0KG1lbnUuaWQpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgdGhpcy5wZXJtaXNzaW9ucyA9IHJlcy5kYXRhDQogICAgICB9KQ0KICAgIH0sDQogICAgaGFuZGxlUm9sZVJvd0NsaWNrKHJvbGUpIHsNCiAgICAgIHRoaXMucm9sZUlkID0gcm9sZS5pZA0KICAgICAgdGhpcy5wZXJtaXNzaW9ucyA9IFtdDQogICAgICByb2xlUGVybWlzc2lvbnMocm9sZS5pZCkudGhlbihyZXMgPT4gew0KICAgICAgICB0aGlzLnJvbGVQZXJtaXNzaW9ucyA9IHJlcy5kYXRhDQogICAgICB9KQ0KICAgICAgcm9sZU1lbnVzKHJvbGUuaWQpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgIHJlcy5kYXRhLmZvckVhY2goKGVsZW1lbnQpID0+IHsNCiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy4kcmVmcy50cmVlLmdldE5vZGUoZWxlbWVudCkNCiAgICAgICAgICAgIGlmIChub2RlLmlzTGVhZikgew0KICAgICAgICAgICAgICB0aGlzLiRyZWZzLnRyZWUuc2V0Q2hlY2tlZChub2RlLCB0cnVlKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICAgIH0pDQogICAgICAgIC8vIHRoaXMuJHJlZnMudHJlZS5zZXRDaGVja2VkS2V5cyhyZXMuZGF0YSkNCiAgICAgIH0pDQogICAgfSwNCiAgICBsb2FkTWVudVNlbGVjdCgpIHsNCiAgICAgIG1lbnVTZWxlY3QoMSkudGhlbihyZXMgPT4gew0KICAgICAgICB0aGlzLm1lbnVzID0gcmVzLmRhdGENCiAgICAgIH0pDQogICAgfSwNCiAgICBoYW5kbGVTdGF0dXNDaGFuZ2Uocm93KSB7DQogICAgICBjb25zdCBzdGF0dXNUZXh0ID0gcm93LnN0YXR1cyA9PT0gMSA/ICflkK/nlKgnIDogJ+emgeeUqCcNCiAgICAgIHRoaXMuJGNvbmZpcm0oYOatpOaTjeS9nOWwhiR7c3RhdHVzVGV4dH3or6Xop5LoibJgLCAn5piv5ZCm57un57utPycsICfmj5DnpLonLCB7DQogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywNCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsDQogICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgIHVwZGF0ZVN0YXR1cyhyb3cuaWQsIHJvdy5zdGF0dXMpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywNCiAgICAgICAgICAgIG1lc3NhZ2U6ICfmk43kvZzmiJDlip8hJw0KICAgICAgICAgIH0pDQogICAgICAgIH0pDQogICAgICB9KS5jYXRjaCgoKSA9PiB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgIHR5cGU6ICdpbmZvJywNCiAgICAgICAgICBtZXNzYWdlOiAn5Y+W5raI5pON5L2cJw0KICAgICAgICB9KQ0KICAgICAgICByb3cuc3RhdHVzID0gcm93LnN0YXR1cyA9PT0gMSA/IDAgOiAxDQogICAgICB9KQ0KICAgIH0sDQogICAgc2F2ZVJvbGVJbmZvKCkgew0KICAgICAgaWYgKHRoaXMucm9sZUZvcm0uaWQpIHsNCiAgICAgICAgdXBkYXRlUm9sZSh0aGlzLnJvbGVGb3JtKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgICBtZXNzYWdlOiAn5pu05paw5oiQ5YqfIScNCiAgICAgICAgICB9KQ0KICAgICAgICAgIHRoaXMucm9sZUZvcm1TaG93ID0gZmFsc2UNCiAgICAgICAgICB0aGlzLmZldGNoUm9sZURhdGEoKQ0KICAgICAgICB9KQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgY3JlYXRlUm9sZSh0aGlzLnJvbGVGb3JtKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgICBtZXNzYWdlOiAn5re75Yqg5oiQ5YqfIScNCiAgICAgICAgICB9KQ0KICAgICAgICAgIHRoaXMucm9sZUZvcm1TaG93ID0gZmFsc2UNCiAgICAgICAgICB0aGlzLmZldGNoUm9sZURhdGEoKQ0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0sDQogICAgaGFuZGxlRGVsZXRlKGlkKSB7DQogICAgICB0aGlzLiRjb25maXJtKGDnoa7lrprliKDpmaTmraTop5LoibLlkJfvvJ9gLCAn5piv5ZCm57un57utPycsICfmj5DnpLonLCB7DQogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywNCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsDQogICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgIGRlbGV0ZXMoaWQpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywNCiAgICAgICAgICAgIG1lc3NhZ2U6ICfmk43kvZzmiJDlip8hJw0KICAgICAgICAgIH0pDQogICAgICAgICAgdGhpcy5mZXRjaFJvbGVEYXRhKCkNCiAgICAgICAgfSkNCiAgICAgIH0pDQogICAgfSwNCiAgICBoYW5kbGVBZGQoKSB7DQogICAgICB0aGlzLiRjb21tb24uY2xlYXIodGhpcy5yb2xlRm9ybSkNCiAgICAgIHRoaXMucm9sZUZvcm1TaG93ID0gdHJ1ZQ0KICAgICAgdGhpcy5yb2xlRm9ybS5zdGF0dXMgPSAxDQogICAgICB0aGlzLnJvbGVGb3JtVGl0bGUgPSAn5paw5aKe6KeS6ImyJw0KICAgIH0sDQogICAgaGFuZGxlRWRpdChyb3cpIHsNCiAgICAgIHRoaXMuJGNvbW1vbi5jbGVhcih0aGlzLnJvbGVGb3JtKQ0KICAgICAgdGhpcy5yb2xlRm9ybS5pZCA9IHJvdy5pZA0KICAgICAgdGhpcy5yb2xlRm9ybS5uYW1lID0gcm93Lm5hbWUNCiAgICAgIHRoaXMucm9sZUZvcm0uY29kZSA9IHJvdy5jb2RlDQogICAgICB0aGlzLnJvbGVGb3JtLnNvcnQgPSByb3cuc29ydA0KICAgICAgdGhpcy5yb2xlRm9ybS5zdGF0dXMgPSByb3cuc3RhdHVzDQogICAgICB0aGlzLnJvbGVGb3JtU2hvdyA9IHRydWUNCiAgICAgIHRoaXMucm9sZUZvcm1UaXRsZSA9ICfnvJbovpHop5LoibInDQogICAgfSwNCiAgICBmZXRjaFJvbGVEYXRhKCkgew0KICAgICAgbGlzdFBhZ2UodGhpcy5wYWdlUGFyYW0pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgdGhpcy5yb2xlTGlzdCA9IHJlcy5kYXRhLmxpc3QNCiAgICAgICAgdGhpcy50b3RhbCA9IHJlcy5kYXRhLnRvdGFsDQogICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZQ0KICAgICAgfSkNCiAgICB9DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgLi4ubWFwR2V0dGVycyhbDQogICAgICAnbmFtZScNCiAgICBdKQ0KICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoHA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/admin/role","sourcesContent":["<template>\r\n  <div class=\"dashboard-container\">\r\n    <el-row :gutter=\"8\">\r\n      <el-col :span=\"11\">\r\n        <el-card class=\"box-card\">\r\n          <div slot=\"header\" class=\"clearfix\">\r\n            <span>角色管理</span>\r\n            <el-button style=\"float: right; padding: 1px 0\" type=\"text\" @click=\"handleAdd\">新增</el-button>\r\n          </div>\r\n          <el-dialog :title=\"roleFormTitle\" :visible.sync=\"roleFormShow\" width=\"500px\">\r\n            <el-form :model=\"roleForm\" label-width=\"80px\">\r\n              <el-form-item label=\"角色名称\">\r\n                <el-input v-model=\"roleForm.name\" wu></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"角色编码\">\r\n                <el-input v-model=\"roleForm.code\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"排序\">\r\n                <el-input v-model=\"roleForm.sort\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"状态\">\r\n                <el-switch\r\n                  v-model=\"roleForm.status\"\r\n                  :active-value=\"1\"\r\n                  :inactive-value=\"0\"\r\n                  active-color=\"#13ce66\"\r\n                  inactive-color=\"#ff4949\">\r\n                </el-switch>\r\n              </el-form-item>\r\n            </el-form>\r\n            <div slot=\"footer\" class=\"dialog-footer\">\r\n              <el-button @click=\"roleFormShow = false\">取 消</el-button>\r\n              <el-button type=\"primary\" @click=\"saveRoleInfo()\">提 交</el-button>\r\n            </div>\r\n          </el-dialog>\r\n          <el-table\r\n            v-loading=\"listLoading\"\r\n            :data=\"roleList\"\r\n            border\r\n            row-key=\"id\"\r\n            style=\"width: 100%;margin-bottom: 20px;\"\r\n            @row-click=\"handleRoleRowClick\">\r\n            <el-table-column\r\n              label=\"角色名称\"\r\n              prop=\"name\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              label=\"角色编码\"\r\n              prop=\"code\"\r\n              width=\"150\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              label=\"显示顺序\"\r\n              prop=\"sort\"\r\n              width=\"80\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              label=\"状态\"\r\n              prop=\"visible\" width=\"90\">\r\n              <template slot-scope=\"scope\">\r\n                <el-switch\r\n                  v-model=\"scope.row.status\"\r\n                  :active-value=\"1\"\r\n                  :inactive-value=\"0\"\r\n                  active-color=\"#13ce66\"\r\n                  inactive-color=\"#ff4949\"\r\n                  @change=\"handleStatusChange(scope.row)\">\r\n                </el-switch>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column align=\"center\" label=\"操作\" >\r\n              <template slot-scope=\"scope\">\r\n                <div class=\"tag-group\">\r\n                  <el-tag size=\"small\" style=\"cursor: pointer\" type=\"\" @click=\"handleEdit(scope.row)\">编辑</el-tag>&nbsp;&nbsp;\r\n                  <el-tag size=\"small\" style=\"cursor: pointer\" type=\"danger\" @click=\"handleDelete(scope.row.id)\">删除\r\n                  </el-tag>\r\n                </div>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n          <pagination v-show=\"total>0\" :limit.sync=\"pageParam.pageSize\" :page.sync=\"pageParam.pageNo\" :total=\"total\" @pagination=\"fetchRoleData\"/>\r\n        </el-card>\r\n      </el-col>\r\n      <el-col :span=\"6\">\r\n        <el-card class=\"box-card\">\r\n          <div slot=\"header\" class=\"clearfix\">\r\n            <span>菜单选择</span>\r\n            <el-button style=\"float: right; padding: 1px 0\" type=\"text\" @click=\"saveRoleMenu\">保存</el-button>\r\n          </div>\r\n          <el-tree\r\n            ref=\"tree\"\r\n            :data=\"menus\"\r\n            :default-checked-keys=\"[]\"\r\n            node-key=\"id\"\r\n            show-checkbox\r\n            @node-click=\"nodeClick\">\r\n          </el-tree>\r\n        </el-card>\r\n      </el-col>\r\n      <el-col :span=\"7\">\r\n        <el-card class=\"box-card\">\r\n          <div slot=\"header\" class=\"clearfix\">\r\n            <span>权限选择</span>\r\n            <el-button style=\"float: right; padding: 1px 0\" type=\"text\" @click=\"saveRolePermission\">保存</el-button>\r\n          </div>\r\n\r\n          <el-checkbox-group v-model=\"rolePermissions\">\r\n            <el-checkbox v-for=\"item in permissions\" :key=\"item.id\" :label=\"item.id\">{{ item.name }}</el-checkbox>\r\n          </el-checkbox-group>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { createRole, deletes, listPage, updateRole, updateStatus } from '@/api/admin/role'\r\nimport { mapGetters } from 'vuex'\r\nimport { menuSelect, roleMenus, saveRoleMenus } from '@/api/admin/menu'\r\nimport { permissionList, rolePermissions, saveRolePermissions } from '@/api/admin/permission'\r\nimport Pagination from '@/components/Pagination'\r\n\r\nexport default {\r\n  name: 'Dashboard',\r\n  components: { Pagination },\r\n  data() {\r\n    return {\r\n      roleId: '',\r\n      listLoading: false,\r\n      rolePermissions: [],\r\n      permissions: [],\r\n      roleFormTitle: '',\r\n      menus: [],\r\n      roleFormShow: false,\r\n      roleForm: {\r\n        id: '',\r\n        name: '',\r\n        code: '',\r\n        sort: '',\r\n        status: 1\r\n      },\r\n      roleList: [],\r\n      ruleListLoading: true,\r\n      total: 0,\r\n      pageParam: {\r\n        pageNo: 1,\r\n        pageSize: 10,\r\n        keyword: ''\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchRoleData()\r\n    this.loadMenuSelect()\r\n  },\r\n  methods: {\r\n    saveRolePermission() {\r\n      if (!this.roleId) {\r\n        this.$message({\r\n          type: 'error',\r\n          message: '请先选择角色!'\r\n        })\r\n        return\r\n      }\r\n      saveRolePermissions(this.roleId, {ids: this.rolePermissions}).then(res => {\r\n        this.$message({\r\n          type: 'success',\r\n          message: '更新成功!'\r\n        })\r\n      })\r\n    },\r\n    saveRoleMenu() {\r\n      if (!this.roleId) {\r\n        this.$message({\r\n          type: 'error',\r\n          message: '请先选择角色!'\r\n        })\r\n        return\r\n      }\r\n      var arr = [];\r\n      this.$refs.tree.getCheckedNodes(false, true).forEach(item=>{\r\n        arr.push(item.id)\r\n      })\r\n      saveRoleMenus(this.roleId, { ids: arr }).then(res => {\r\n        this.$message({\r\n          type: 'success',\r\n          message: '更新成功!'\r\n        })\r\n      })\r\n    },\r\n    nodeClick(menu, nodeInfo) {\r\n      permissionList(menu.id).then(res => {\r\n        this.permissions = res.data\r\n      })\r\n    },\r\n    handleRoleRowClick(role) {\r\n      this.roleId = role.id\r\n      this.permissions = []\r\n      rolePermissions(role.id).then(res => {\r\n        this.rolePermissions = res.data\r\n      })\r\n      roleMenus(role.id).then(res => {\r\n        this.$nextTick(() => {\r\n          res.data.forEach((element) => {\r\n            var node = this.$refs.tree.getNode(element)\r\n            if (node.isLeaf) {\r\n              this.$refs.tree.setChecked(node, true)\r\n            }\r\n          })\r\n        })\r\n        // this.$refs.tree.setCheckedKeys(res.data)\r\n      })\r\n    },\r\n    loadMenuSelect() {\r\n      menuSelect(1).then(res => {\r\n        this.menus = res.data\r\n      })\r\n    },\r\n    handleStatusChange(row) {\r\n      const statusText = row.status === 1 ? '启用' : '禁用'\r\n      this.$confirm(`此操作将${statusText}该角色`, '是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        updateStatus(row.id, row.status).then(res => {\r\n          this.$message({\r\n            type: 'success',\r\n            message: '操作成功!'\r\n          })\r\n        })\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '取消操作'\r\n        })\r\n        row.status = row.status === 1 ? 0 : 1\r\n      })\r\n    },\r\n    saveRoleInfo() {\r\n      if (this.roleForm.id) {\r\n        updateRole(this.roleForm).then(res => {\r\n          this.$message({\r\n            type: 'success',\r\n            message: '更新成功!'\r\n          })\r\n          this.roleFormShow = false\r\n          this.fetchRoleData()\r\n        })\r\n      } else {\r\n        createRole(this.roleForm).then(res => {\r\n          this.$message({\r\n            type: 'success',\r\n            message: '添加成功!'\r\n          })\r\n          this.roleFormShow = false\r\n          this.fetchRoleData()\r\n        })\r\n      }\r\n    },\r\n    handleDelete(id) {\r\n      this.$confirm(`确定删除此角色吗？`, '是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        deletes(id).then(res => {\r\n          this.$message({\r\n            type: 'success',\r\n            message: '操作成功!'\r\n          })\r\n          this.fetchRoleData()\r\n        })\r\n      })\r\n    },\r\n    handleAdd() {\r\n      this.$common.clear(this.roleForm)\r\n      this.roleFormShow = true\r\n      this.roleForm.status = 1\r\n      this.roleFormTitle = '新增角色'\r\n    },\r\n    handleEdit(row) {\r\n      this.$common.clear(this.roleForm)\r\n      this.roleForm.id = row.id\r\n      this.roleForm.name = row.name\r\n      this.roleForm.code = row.code\r\n      this.roleForm.sort = row.sort\r\n      this.roleForm.status = row.status\r\n      this.roleFormShow = true\r\n      this.roleFormTitle = '编辑角色'\r\n    },\r\n    fetchRoleData() {\r\n      listPage(this.pageParam).then(res => {\r\n        this.roleList = res.data.list\r\n        this.total = res.data.total\r\n        this.listLoading = false\r\n      })\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      'name'\r\n    ])\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.dashboard {\r\n  &-container {\r\n    margin: 30px;\r\n  }\r\n\r\n  &-text {\r\n    font-size: 30px;\r\n    line-height: 46px;\r\n  }\r\n}\r\n</style>\r\n"]}]}