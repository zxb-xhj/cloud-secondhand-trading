{"remainingRequest":"E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\node_modules\\babel-loader\\lib\\index.js!E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\src\\views\\admin\\role\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\src\\views\\admin\\role\\index.vue","mtime":1694356754351},{"path":"E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\babel.config.js","mtime":1681796553875},{"path":"E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRTovU29mdHdhcmVEZXZlbG9wbWVudC9zb2Z0d2FyZS9cdTVGMDBcdTZFOTBcdTRFOENcdTYyNEJcdTU1NDZcdTU3Q0UvY2xvdWQtc2Vjb25kaGFuZC10cmFkaW5nL2Zyb250LWVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvcnQuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwoKaW1wb3J0IHsgY3JlYXRlUm9sZSwgZGVsZXRlcywgbGlzdFBhZ2UsIHVwZGF0ZVJvbGUsIHVwZGF0ZVN0YXR1cyB9IGZyb20gJ0AvYXBpL2FkbWluL3JvbGUnOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IG1lbnVTZWxlY3QsIHJvbGVNZW51cywgc2F2ZVJvbGVNZW51cyB9IGZyb20gJ0AvYXBpL2FkbWluL21lbnUnOwppbXBvcnQgeyBwZXJtaXNzaW9uTGlzdCwgcm9sZVBlcm1pc3Npb25zLCBzYXZlUm9sZVBlcm1pc3Npb25zIH0gZnJvbSAnQC9hcGkvYWRtaW4vcGVybWlzc2lvbic7CmltcG9ydCBQYWdpbmF0aW9uIGZyb20gJ0AvY29tcG9uZW50cy9QYWdpbmF0aW9uJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdEYXNoYm9hcmQnLAogIGNvbXBvbmVudHM6IHsKICAgIFBhZ2luYXRpb246IFBhZ2luYXRpb24KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByb2xlSWQ6ICcnLAogICAgICBsaXN0TG9hZGluZzogZmFsc2UsCiAgICAgIHJvbGVQZXJtaXNzaW9uczogW10sCiAgICAgIHBlcm1pc3Npb25zOiBbXSwKICAgICAgcm9sZUZvcm1UaXRsZTogJycsCiAgICAgIG1lbnVzOiBbXSwKICAgICAgcm9sZUZvcm1TaG93OiBmYWxzZSwKICAgICAgcm9sZUZvcm06IHsKICAgICAgICBpZDogJycsCiAgICAgICAgbmFtZTogJycsCiAgICAgICAgY29kZTogJycsCiAgICAgICAgc29ydDogJycsCiAgICAgICAgc3RhdHVzOiAxCiAgICAgIH0sCiAgICAgIHJvbGVMaXN0OiBbXSwKICAgICAgcnVsZUxpc3RMb2FkaW5nOiB0cnVlLAogICAgICB0b3RhbDogMCwKICAgICAgcGFnZVBhcmFtOiB7CiAgICAgICAgcGFnZU5vOiAxLAogICAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgICBrZXl3b3JkOiAnJwogICAgICB9CiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZmV0Y2hSb2xlRGF0YSgpOwogICAgdGhpcy5sb2FkTWVudVNlbGVjdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgc2F2ZVJvbGVQZXJtaXNzaW9uOiBmdW5jdGlvbiBzYXZlUm9sZVBlcm1pc3Npb24oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIGlmICghdGhpcy5yb2xlSWQpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgICAgICBtZXNzYWdlOiAn6K+35YWI6YCJ5oup6KeS6ImyIScKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgc2F2ZVJvbGVQZXJtaXNzaW9ucyh0aGlzLnJvbGVJZCwgewogICAgICAgIGlkczogdGhpcy5yb2xlUGVybWlzc2lvbnMKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgbWVzc2FnZTogJ+abtOaWsOaIkOWKnyEnCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIHNhdmVSb2xlTWVudTogZnVuY3Rpb24gc2F2ZVJvbGVNZW51KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgaWYgKCF0aGlzLnJvbGVJZCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgIG1lc3NhZ2U6ICfor7flhYjpgInmi6nop5LoibIhJwogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgYXJyID0gW107CiAgICAgIHRoaXMuJHJlZnMudHJlZS5nZXRDaGVja2VkTm9kZXMoZmFsc2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBhcnIucHVzaChpdGVtLmlkKTsKICAgICAgfSk7CiAgICAgIHNhdmVSb2xlTWVudXModGhpcy5yb2xlSWQsIHsKICAgICAgICBpZHM6IGFycgogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczIuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgbWVzc2FnZTogJ+abtOaWsOaIkOWKnyEnCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIG5vZGVDbGljazogZnVuY3Rpb24gbm9kZUNsaWNrKG1lbnUsIG5vZGVJbmZvKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICBwZXJtaXNzaW9uTGlzdChtZW51LmlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczMucGVybWlzc2lvbnMgPSByZXMuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlUm9sZVJvd0NsaWNrOiBmdW5jdGlvbiBoYW5kbGVSb2xlUm93Q2xpY2socm9sZSkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKICAgICAgdGhpcy5yb2xlSWQgPSByb2xlLmlkOwogICAgICB0aGlzLnBlcm1pc3Npb25zID0gW107CiAgICAgIHJvbGVQZXJtaXNzaW9ucyhyb2xlLmlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczQucm9sZVBlcm1pc3Npb25zID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgICByb2xlTWVudXMocm9sZS5pZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXM0LiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXMuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgIHZhciBub2RlID0gX3RoaXM0LiRyZWZzLnRyZWUuZ2V0Tm9kZShlbGVtZW50KTsKICAgICAgICAgICAgaWYgKG5vZGUuaXNMZWFmKSB7CiAgICAgICAgICAgICAgX3RoaXM0LiRyZWZzLnRyZWUuc2V0Q2hlY2tlZChub2RlLCB0cnVlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgLy8gdGhpcy4kcmVmcy50cmVlLnNldENoZWNrZWRLZXlzKHJlcy5kYXRhKQogICAgICB9KTsKICAgIH0sCiAgICBsb2FkTWVudVNlbGVjdDogZnVuY3Rpb24gbG9hZE1lbnVTZWxlY3QoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwogICAgICBtZW51U2VsZWN0KDEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzNS5tZW51cyA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVTdGF0dXNDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZVN0YXR1c0NoYW5nZShyb3cpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CiAgICAgIHZhciBzdGF0dXNUZXh0ID0gcm93LnN0YXR1cyA9PT0gMSA/ICflkK/nlKgnIDogJ+emgeeUqCc7CiAgICAgIHRoaXMuJGNvbmZpcm0oIlx1NkI2NFx1NjRDRFx1NEY1Q1x1NUMwNiIuY29uY2F0KHN0YXR1c1RleHQsICJcdThCRTVcdTg5RDJcdTgyNzIiKSwgJ+aYr+WQpue7p+e7rT8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgdXBkYXRlU3RhdHVzKHJvdy5pZCwgcm93LnN0YXR1cykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBfdGhpczYuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfmk43kvZzmiJDlip8hJwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczYuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgbWVzc2FnZTogJ+WPlua2iOaTjeS9nCcKICAgICAgICB9KTsKICAgICAgICByb3cuc3RhdHVzID0gcm93LnN0YXR1cyA9PT0gMSA/IDAgOiAxOwogICAgICB9KTsKICAgIH0sCiAgICBzYXZlUm9sZUluZm86IGZ1bmN0aW9uIHNhdmVSb2xlSW5mbygpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CiAgICAgIGlmICh0aGlzLnJvbGVGb3JtLmlkKSB7CiAgICAgICAgdXBkYXRlUm9sZSh0aGlzLnJvbGVGb3JtKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIF90aGlzNy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgbWVzc2FnZTogJ+abtOaWsOaIkOWKnyEnCiAgICAgICAgICB9KTsKICAgICAgICAgIF90aGlzNy5yb2xlRm9ybVNob3cgPSBmYWxzZTsKICAgICAgICAgIF90aGlzNy5mZXRjaFJvbGVEYXRhKCk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY3JlYXRlUm9sZSh0aGlzLnJvbGVGb3JtKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIF90aGlzNy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgbWVzc2FnZTogJ+a3u+WKoOaIkOWKnyEnCiAgICAgICAgICB9KTsKICAgICAgICAgIF90aGlzNy5yb2xlRm9ybVNob3cgPSBmYWxzZTsKICAgICAgICAgIF90aGlzNy5mZXRjaFJvbGVEYXRhKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVEZWxldGU6IGZ1bmN0aW9uIGhhbmRsZURlbGV0ZShpZCkgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKICAgICAgdGhpcy4kY29uZmlybSgiXHU3ODZFXHU1QjlBXHU1MjIwXHU5NjY0XHU2QjY0XHU4OUQyXHU4MjcyXHU1NDE3XHVGRjFGIiwgJ+aYr+WQpue7p+e7rT8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgZGVsZXRlcyhpZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBfdGhpczguJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfmk43kvZzmiJDlip8hJwogICAgICAgICAgfSk7CiAgICAgICAgICBfdGhpczguZmV0Y2hSb2xlRGF0YSgpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVBZGQ6IGZ1bmN0aW9uIGhhbmRsZUFkZCgpIHsKICAgICAgdGhpcy4kY29tbW9uLmNsZWFyKHRoaXMucm9sZUZvcm0pOwogICAgICB0aGlzLnJvbGVGb3JtU2hvdyA9IHRydWU7CiAgICAgIHRoaXMucm9sZUZvcm0uc3RhdHVzID0gMTsKICAgICAgdGhpcy5yb2xlRm9ybVRpdGxlID0gJ+aWsOWinuinkuiJsic7CiAgICB9LAogICAgaGFuZGxlRWRpdDogZnVuY3Rpb24gaGFuZGxlRWRpdChyb3cpIHsKICAgICAgdGhpcy4kY29tbW9uLmNsZWFyKHRoaXMucm9sZUZvcm0pOwogICAgICB0aGlzLnJvbGVGb3JtLmlkID0gcm93LmlkOwogICAgICB0aGlzLnJvbGVGb3JtLm5hbWUgPSByb3cubmFtZTsKICAgICAgdGhpcy5yb2xlRm9ybS5jb2RlID0gcm93LmNvZGU7CiAgICAgIHRoaXMucm9sZUZvcm0uc29ydCA9IHJvdy5zb3J0OwogICAgICB0aGlzLnJvbGVGb3JtLnN0YXR1cyA9IHJvdy5zdGF0dXM7CiAgICAgIHRoaXMucm9sZUZvcm1TaG93ID0gdHJ1ZTsKICAgICAgdGhpcy5yb2xlRm9ybVRpdGxlID0gJ+e8lui+keinkuiJsic7CiAgICB9LAogICAgZmV0Y2hSb2xlRGF0YTogZnVuY3Rpb24gZmV0Y2hSb2xlRGF0YSgpIHsKICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CiAgICAgIGxpc3RQYWdlKHRoaXMucGFnZVBhcmFtKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczkucm9sZUxpc3QgPSByZXMuZGF0YS5saXN0OwogICAgICAgIF90aGlzOS50b3RhbCA9IHJlcy5kYXRhLnRvdGFsOwogICAgICAgIF90aGlzOS5saXN0TG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0KICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBHZXR0ZXJzKFsnbmFtZSddKSkKfTs="},{"version":3,"names":["createRole","deletes","listPage","updateRole","updateStatus","mapGetters","menuSelect","roleMenus","saveRoleMenus","permissionList","rolePermissions","saveRolePermissions","Pagination","name","components","data","roleId","listLoading","permissions","roleFormTitle","menus","roleFormShow","roleForm","id","code","sort","status","roleList","ruleListLoading","total","pageParam","pageNo","pageSize","keyword","created","fetchRoleData","loadMenuSelect","methods","saveRolePermission","_this","$message","type","message","ids","then","res","saveRoleMenu","_this2","arr","$refs","tree","getCheckedNodes","forEach","item","push","nodeClick","menu","nodeInfo","_this3","handleRoleRowClick","role","_this4","$nextTick","element","node","getNode","isLeaf","setChecked","_this5","handleStatusChange","row","_this6","statusText","$confirm","concat","confirmButtonText","cancelButtonText","catch","saveRoleInfo","_this7","handleDelete","_this8","handleAdd","$common","clear","handleEdit","_this9","list","computed","_objectSpread"],"sources":["src/views/admin/role/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"dashboard-container\">\r\n    <el-row :gutter=\"8\">\r\n      <el-col :span=\"11\">\r\n        <el-card class=\"box-card\">\r\n          <div slot=\"header\" class=\"clearfix\">\r\n            <span>角色管理</span>\r\n            <el-button style=\"float: right; padding: 1px 0\" type=\"text\" @click=\"handleAdd\">新增</el-button>\r\n          </div>\r\n          <el-dialog :title=\"roleFormTitle\" :visible.sync=\"roleFormShow\" width=\"500px\">\r\n            <el-form :model=\"roleForm\" label-width=\"80px\">\r\n              <el-form-item label=\"角色名称\">\r\n                <el-input v-model=\"roleForm.name\" wu></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"角色编码\">\r\n                <el-input v-model=\"roleForm.code\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"排序\">\r\n                <el-input v-model=\"roleForm.sort\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"状态\">\r\n                <el-switch\r\n                  v-model=\"roleForm.status\"\r\n                  :active-value=\"1\"\r\n                  :inactive-value=\"0\"\r\n                  active-color=\"#13ce66\"\r\n                  inactive-color=\"#ff4949\">\r\n                </el-switch>\r\n              </el-form-item>\r\n            </el-form>\r\n            <div slot=\"footer\" class=\"dialog-footer\">\r\n              <el-button @click=\"roleFormShow = false\">取 消</el-button>\r\n              <el-button type=\"primary\" @click=\"saveRoleInfo()\">提 交</el-button>\r\n            </div>\r\n          </el-dialog>\r\n          <el-table\r\n            v-loading=\"listLoading\"\r\n            :data=\"roleList\"\r\n            border\r\n            row-key=\"id\"\r\n            style=\"width: 100%;margin-bottom: 20px;\"\r\n            @row-click=\"handleRoleRowClick\">\r\n            <el-table-column\r\n              label=\"角色名称\"\r\n              prop=\"name\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              label=\"角色编码\"\r\n              prop=\"code\"\r\n              width=\"150\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              label=\"显示顺序\"\r\n              prop=\"sort\"\r\n              width=\"80\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              label=\"状态\"\r\n              prop=\"visible\" width=\"90\">\r\n              <template slot-scope=\"scope\">\r\n                <el-switch\r\n                  v-model=\"scope.row.status\"\r\n                  :active-value=\"1\"\r\n                  :inactive-value=\"0\"\r\n                  active-color=\"#13ce66\"\r\n                  inactive-color=\"#ff4949\"\r\n                  @change=\"handleStatusChange(scope.row)\">\r\n                </el-switch>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column align=\"center\" label=\"操作\" >\r\n              <template slot-scope=\"scope\">\r\n                <div class=\"tag-group\">\r\n                  <el-tag size=\"small\" style=\"cursor: pointer\" type=\"\" @click=\"handleEdit(scope.row)\">编辑</el-tag>&nbsp;&nbsp;\r\n                  <el-tag size=\"small\" style=\"cursor: pointer\" type=\"danger\" @click=\"handleDelete(scope.row.id)\">删除\r\n                  </el-tag>\r\n                </div>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n          <pagination v-show=\"total>0\" :limit.sync=\"pageParam.pageSize\" :page.sync=\"pageParam.pageNo\" :total=\"total\" @pagination=\"fetchRoleData\"/>\r\n        </el-card>\r\n      </el-col>\r\n      <el-col :span=\"6\">\r\n        <el-card class=\"box-card\">\r\n          <div slot=\"header\" class=\"clearfix\">\r\n            <span>菜单选择</span>\r\n            <el-button style=\"float: right; padding: 1px 0\" type=\"text\" @click=\"saveRoleMenu\">保存</el-button>\r\n          </div>\r\n          <el-tree\r\n            ref=\"tree\"\r\n            :data=\"menus\"\r\n            :default-checked-keys=\"[]\"\r\n            node-key=\"id\"\r\n            show-checkbox\r\n            @node-click=\"nodeClick\">\r\n          </el-tree>\r\n        </el-card>\r\n      </el-col>\r\n      <el-col :span=\"7\">\r\n        <el-card class=\"box-card\">\r\n          <div slot=\"header\" class=\"clearfix\">\r\n            <span>权限选择</span>\r\n            <el-button style=\"float: right; padding: 1px 0\" type=\"text\" @click=\"saveRolePermission\">保存</el-button>\r\n          </div>\r\n\r\n          <el-checkbox-group v-model=\"rolePermissions\">\r\n            <el-checkbox v-for=\"item in permissions\" :key=\"item.id\" :label=\"item.id\">{{ item.name }}</el-checkbox>\r\n          </el-checkbox-group>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { createRole, deletes, listPage, updateRole, updateStatus } from '@/api/admin/role'\r\nimport { mapGetters } from 'vuex'\r\nimport { menuSelect, roleMenus, saveRoleMenus } from '@/api/admin/menu'\r\nimport { permissionList, rolePermissions, saveRolePermissions } from '@/api/admin/permission'\r\nimport Pagination from '@/components/Pagination'\r\n\r\nexport default {\r\n  name: 'Dashboard',\r\n  components: { Pagination },\r\n  data() {\r\n    return {\r\n      roleId: '',\r\n      listLoading: false,\r\n      rolePermissions: [],\r\n      permissions: [],\r\n      roleFormTitle: '',\r\n      menus: [],\r\n      roleFormShow: false,\r\n      roleForm: {\r\n        id: '',\r\n        name: '',\r\n        code: '',\r\n        sort: '',\r\n        status: 1\r\n      },\r\n      roleList: [],\r\n      ruleListLoading: true,\r\n      total: 0,\r\n      pageParam: {\r\n        pageNo: 1,\r\n        pageSize: 10,\r\n        keyword: ''\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchRoleData()\r\n    this.loadMenuSelect()\r\n  },\r\n  methods: {\r\n    saveRolePermission() {\r\n      if (!this.roleId) {\r\n        this.$message({\r\n          type: 'error',\r\n          message: '请先选择角色!'\r\n        })\r\n        return\r\n      }\r\n      saveRolePermissions(this.roleId, {ids: this.rolePermissions}).then(res => {\r\n        this.$message({\r\n          type: 'success',\r\n          message: '更新成功!'\r\n        })\r\n      })\r\n    },\r\n    saveRoleMenu() {\r\n      if (!this.roleId) {\r\n        this.$message({\r\n          type: 'error',\r\n          message: '请先选择角色!'\r\n        })\r\n        return\r\n      }\r\n      var arr = [];\r\n      this.$refs.tree.getCheckedNodes(false, true).forEach(item=>{\r\n        arr.push(item.id)\r\n      })\r\n      saveRoleMenus(this.roleId, { ids: arr }).then(res => {\r\n        this.$message({\r\n          type: 'success',\r\n          message: '更新成功!'\r\n        })\r\n      })\r\n    },\r\n    nodeClick(menu, nodeInfo) {\r\n      permissionList(menu.id).then(res => {\r\n        this.permissions = res.data\r\n      })\r\n    },\r\n    handleRoleRowClick(role) {\r\n      this.roleId = role.id\r\n      this.permissions = []\r\n      rolePermissions(role.id).then(res => {\r\n        this.rolePermissions = res.data\r\n      })\r\n      roleMenus(role.id).then(res => {\r\n        this.$nextTick(() => {\r\n          res.data.forEach((element) => {\r\n            var node = this.$refs.tree.getNode(element)\r\n            if (node.isLeaf) {\r\n              this.$refs.tree.setChecked(node, true)\r\n            }\r\n          })\r\n        })\r\n        // this.$refs.tree.setCheckedKeys(res.data)\r\n      })\r\n    },\r\n    loadMenuSelect() {\r\n      menuSelect(1).then(res => {\r\n        this.menus = res.data\r\n      })\r\n    },\r\n    handleStatusChange(row) {\r\n      const statusText = row.status === 1 ? '启用' : '禁用'\r\n      this.$confirm(`此操作将${statusText}该角色`, '是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        updateStatus(row.id, row.status).then(res => {\r\n          this.$message({\r\n            type: 'success',\r\n            message: '操作成功!'\r\n          })\r\n        })\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '取消操作'\r\n        })\r\n        row.status = row.status === 1 ? 0 : 1\r\n      })\r\n    },\r\n    saveRoleInfo() {\r\n      if (this.roleForm.id) {\r\n        updateRole(this.roleForm).then(res => {\r\n          this.$message({\r\n            type: 'success',\r\n            message: '更新成功!'\r\n          })\r\n          this.roleFormShow = false\r\n          this.fetchRoleData()\r\n        })\r\n      } else {\r\n        createRole(this.roleForm).then(res => {\r\n          this.$message({\r\n            type: 'success',\r\n            message: '添加成功!'\r\n          })\r\n          this.roleFormShow = false\r\n          this.fetchRoleData()\r\n        })\r\n      }\r\n    },\r\n    handleDelete(id) {\r\n      this.$confirm(`确定删除此角色吗？`, '是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        deletes(id).then(res => {\r\n          this.$message({\r\n            type: 'success',\r\n            message: '操作成功!'\r\n          })\r\n          this.fetchRoleData()\r\n        })\r\n      })\r\n    },\r\n    handleAdd() {\r\n      this.$common.clear(this.roleForm)\r\n      this.roleFormShow = true\r\n      this.roleForm.status = 1\r\n      this.roleFormTitle = '新增角色'\r\n    },\r\n    handleEdit(row) {\r\n      this.$common.clear(this.roleForm)\r\n      this.roleForm.id = row.id\r\n      this.roleForm.name = row.name\r\n      this.roleForm.code = row.code\r\n      this.roleForm.sort = row.sort\r\n      this.roleForm.status = row.status\r\n      this.roleFormShow = true\r\n      this.roleFormTitle = '编辑角色'\r\n    },\r\n    fetchRoleData() {\r\n      listPage(this.pageParam).then(res => {\r\n        this.roleList = res.data.list\r\n        this.total = res.data.total\r\n        this.listLoading = false\r\n      })\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      'name'\r\n    ])\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.dashboard {\r\n  &-container {\r\n    margin: 30px;\r\n  }\r\n\r\n  &-text {\r\n    font-size: 30px;\r\n    line-height: 46px;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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"}]}