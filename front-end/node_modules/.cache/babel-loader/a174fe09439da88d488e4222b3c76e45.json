{"remainingRequest":"E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\node_modules\\babel-loader\\lib\\index.js!E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\src\\views\\component\\multiUpload.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\src\\views\\component\\multiUpload.vue","mtime":1694356754354},{"path":"E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\babel.config.js","mtime":1681796553875},{"path":"E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\SoftwareDevelopment\\software\\开源二手商城\\cloud-secondhand-trading\\front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHBvbGljeSB9IGZyb20gJ0AvYXBpL29zcy9wb2xpY3knOwppbXBvcnQgeyBnZXRVVUlEIH0gZnJvbSAnQC91dGlscyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTXVsdGlVcGxvYWQnLAogIHByb3BzOiB7CiAgICAvL+WbvueJh+WxnuaAp+aVsOe7hAogICAgdmFsdWU6IFtdLAogICAgLy/mnIDlpKfkuIrkvKDlm77niYfmlbDph48KICAgIG1heENvdW50OiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMzAKICAgIH0sCiAgICBsaXN0VHlwZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdwaWN0dXJlLWNhcmQnCiAgICB9LAogICAgc2hvd0ZpbGU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRhdGFPYmo6IHsKICAgICAgICBwb2xpY3k6ICcnLAogICAgICAgIHNpZ25hdHVyZTogJycsCiAgICAgICAga2V5OiAnJywKICAgICAgICBvc3NhY2Nlc3NLZXlJZDogJycsCiAgICAgICAgZGlyOiAnJywKICAgICAgICBob3N0OiAnJywKICAgICAgICB1dWlkOiAnJwogICAgICB9LAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgZGlhbG9nSW1hZ2VVcmw6IG51bGwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgZmlsZUxpc3Q6IGZ1bmN0aW9uIGZpbGVMaXN0KCkgewogICAgICB2YXIgZmlsZUxpc3QgPSBbXTsKICAgICAgY29uc29sZS5sb2codGhpcy52YWx1ZSk7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy52YWx1ZS5sZW5ndGg7IGkrKykgewogICAgICAgIGZpbGVMaXN0LnB1c2goewogICAgICAgICAgdXJsOiB0aGlzLnZhbHVlW2ldCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGZpbGVMaXN0OwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHt9LAogIG1ldGhvZHM6IHsKICAgIGVtaXRJbnB1dDogZnVuY3Rpb24gZW1pdElucHV0KGZpbGVMaXN0KSB7CiAgICAgIHZhciB2YWx1ZSA9IFtdOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpbGVMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFsdWUucHVzaChmaWxlTGlzdFtpXS51cmwpOwogICAgICB9CiAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgdmFsdWUpOwogICAgfSwKICAgIGhhbmRsZVJlbW92ZTogZnVuY3Rpb24gaGFuZGxlUmVtb3ZlKGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgIHRoaXMuZW1pdElucHV0KGZpbGVMaXN0KTsKICAgIH0sCiAgICBoYW5kbGVQcmV2aWV3OiBmdW5jdGlvbiBoYW5kbGVQcmV2aWV3KGZpbGUpIHsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5kaWFsb2dJbWFnZVVybCA9IGZpbGUudXJsOwogICAgfSwKICAgIGJlZm9yZVVwbG9hZDogZnVuY3Rpb24gYmVmb3JlVXBsb2FkKGZpbGUpIHsKICAgICAgdmFyIF9zZWxmID0gdGhpczsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBwb2xpY3koKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgY29uc29sZS5sb2coJ+i/meaYr+S7gOS5iCR7ZmlsZW5hbWV9Jyk7CiAgICAgICAgICBfc2VsZi5kYXRhT2JqLnBvbGljeSA9IHJlc3BvbnNlLmRhdGEucG9saWN5OwogICAgICAgICAgX3NlbGYuZGF0YU9iai5zaWduYXR1cmUgPSByZXNwb25zZS5kYXRhLnNpZ25hdHVyZTsKICAgICAgICAgIF9zZWxmLmRhdGFPYmoub3NzYWNjZXNzS2V5SWQgPSByZXNwb25zZS5kYXRhLmFjY2Vzc2lkOwogICAgICAgICAgX3NlbGYuZGF0YU9iai5rZXkgPSByZXNwb25zZS5kYXRhLmRpciArIGdldFVVSUQoKSArICdfJHtmaWxlbmFtZX0nOwogICAgICAgICAgX3NlbGYuZGF0YU9iai5kaXIgPSByZXNwb25zZS5kYXRhLmRpcjsKICAgICAgICAgIF9zZWxmLmRhdGFPYmouaG9zdCA9IHJlc3BvbnNlLmRhdGEuaG9zdDsKICAgICAgICAgIHJlc29sdmUodHJ1ZSk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgY29uc29sZS5sb2coJ+WHuumUmeS6hi4uLicsIGVycik7CiAgICAgICAgICByZWplY3QoZmFsc2UpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVVcGxvYWRTdWNjZXNzOiBmdW5jdGlvbiBoYW5kbGVVcGxvYWRTdWNjZXNzKHJlcywgZmlsZSkgewogICAgICB0aGlzLmZpbGVMaXN0LnB1c2goewogICAgICAgIG5hbWU6IGZpbGUubmFtZSwKICAgICAgICAvLyB1cmw6IHRoaXMuZGF0YU9iai5ob3N0ICsgIi8iICsgdGhpcy5kYXRhT2JqLmRpciArICIvIiArIGZpbGUubmFtZe+8myDmm7/mjaIke2ZpbGVuYW1lfeS4uuecn+ato+eahOaWh+S7tuWQjQogICAgICAgIHVybDogdGhpcy5kYXRhT2JqLmhvc3QgKyAnLycgKyB0aGlzLmRhdGFPYmoua2V5LnJlcGxhY2UoJyR7ZmlsZW5hbWV9JywgZmlsZS5uYW1lKQogICAgICB9KTsKICAgICAgdGhpcy5lbWl0SW5wdXQodGhpcy5maWxlTGlzdCk7CiAgICB9LAogICAgaGFuZGxlRXhjZWVkOiBmdW5jdGlvbiBoYW5kbGVFeGNlZWQoZmlsZXMsIGZpbGVMaXN0KSB7CiAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgIG1lc3NhZ2U6ICfmnIDlpJrlj6rog73kuIrkvKAnICsgdGhpcy5tYXhDb3VudCArICflvKDlm77niYcnLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJywKICAgICAgICBkdXJhdGlvbjogMTAwMAogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"names":["policy","getUUID","name","props","value","maxCount","type","Number","default","listType","String","showFile","Boolean","data","dataObj","signature","key","ossaccessKeyId","dir","host","uuid","dialogVisible","dialogImageUrl","computed","fileList","console","log","i","length","push","url","mounted","methods","emitInput","$emit","handleRemove","file","handlePreview","beforeUpload","_self","Promise","resolve","reject","then","response","accessid","catch","err","handleUploadSuccess","res","replace","handleExceed","files","$message","message","duration"],"sources":["src/views/component/multiUpload.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <el-upload\r\n      action=\"http://gulimall-xfwang.oss-cn-shanghai.aliyuncs.com\"\r\n      :data=\"dataObj\"\r\n      :list-type=\"listType\"\r\n      :file-list=\"fileList\"\r\n      :before-upload=\"beforeUpload\"\r\n      :on-remove=\"handleRemove\"\r\n      :on-success=\"handleUploadSuccess\"\r\n      :on-preview=\"handlePreview\"\r\n      :limit=\"maxCount\"\r\n      :on-exceed=\"handleExceed\"\r\n      :show-file-list=\"showFile\"\r\n    >\r\n      <i class=\"el-icon-plus\"></i>\r\n    </el-upload>\r\n    <el-dialog :visible.sync=\"dialogVisible\">\r\n      <img width=\"100%\" :src=\"dialogImageUrl\" alt />\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { policy } from '@/api/oss/policy'\r\nimport { getUUID } from '@/utils'\r\nexport default {\r\n  name: 'MultiUpload',\r\n  props: {\r\n    //图片属性数组\r\n    value: [],\r\n    //最大上传图片数量\r\n    maxCount: {\r\n      type: Number,\r\n      default: 30\r\n    },\r\n    listType: {\r\n      type: String,\r\n      default: 'picture-card'\r\n    },\r\n    showFile: {\r\n      type: Boolean,\r\n      default: true\r\n    }\r\n\r\n  },\r\n  data() {\r\n    return {\r\n      dataObj: {\r\n        policy: '',\r\n        signature: '',\r\n        key: '',\r\n        ossaccessKeyId: '',\r\n        dir: '',\r\n        host: '',\r\n        uuid: ''\r\n      },\r\n      dialogVisible: false,\r\n      dialogImageUrl: null\r\n    };\r\n  },\r\n  computed: {\r\n    fileList() {\r\n      let fileList = []\r\n      console.log(this.value)\r\n      for (let i = 0; i < this.value.length; i++) {\r\n        fileList.push({ url: this.value[i] })\r\n      }\r\n\r\n      return fileList\r\n    }\r\n  },\r\n  mounted() {},\r\n  methods: {\r\n    emitInput(fileList) {\r\n      let value = []\r\n      for (let i = 0; i < fileList.length; i++) {\r\n        value.push(fileList[i].url)\r\n      }\r\n      this.$emit('input', value)\r\n    },\r\n    handleRemove(file, fileList) {\r\n      this.emitInput(fileList)\r\n    },\r\n    handlePreview(file) {\r\n      this.dialogVisible = true\r\n      this.dialogImageUrl = file.url\r\n    },\r\n    beforeUpload(file) {\r\n      let _self = this\r\n      return new Promise((resolve, reject) => {\r\n        policy()\r\n          .then(response => {\r\n            console.log('这是什么${filename}')\r\n            _self.dataObj.policy = response.data.policy\r\n            _self.dataObj.signature = response.data.signature\r\n            _self.dataObj.ossaccessKeyId = response.data.accessid\r\n            _self.dataObj.key = response.data.dir + getUUID() + '_${filename}'\r\n            _self.dataObj.dir = response.data.dir\r\n            _self.dataObj.host = response.data.host\r\n            resolve(true)\r\n          })\r\n          .catch(err => {\r\n            console.log('出错了...', err)\r\n            reject(false)\r\n          })\r\n      })\r\n    },\r\n    handleUploadSuccess(res, file) {\r\n      this.fileList.push({\r\n        name: file.name,\r\n        // url: this.dataObj.host + \"/\" + this.dataObj.dir + \"/\" + file.name； 替换${filename}为真正的文件名\r\n        url: this.dataObj.host + '/' + this.dataObj.key.replace('${filename}',file.name)\r\n      })\r\n      this.emitInput(this.fileList)\r\n    },\r\n    handleExceed(files, fileList) {\r\n      this.$message({\r\n        message: '最多只能上传' + this.maxCount + '张图片',\r\n        type: 'warning',\r\n        duration: 1000\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style>\r\n</style>\r\n"],"mappings":"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"}]}